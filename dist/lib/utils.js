"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("lodash-es"),E=m=>{const r=m;return r.install=a=>{a.component(r.name,r)},r},y=m=>!isNaN(parseFloat(m))&&isFinite(m)&&Number(m)===m,I=(m,r,a)=>{var A,z,j;const e=u.cloneDeep(m);if(!e)return;const c=Array.isArray(e==null?void 0:e.dimensions)?"":e==null?void 0:e.dimensions.name,i=Array.isArray(e==null?void 0:e.dimensions)?[]:(A=e==null?void 0:e.dimensions)==null?void 0:A.data,l=(r==null?void 0:r.stack)||null,b=(r==null?void 0:r.percentage)||!1;if(!(a!=null&&a.isEmptyData)&&i===void 0)return;const F=`${c}`,O=i.length>0&&i[0],S=y(O)&&(a==null?void 0:a.chartType)==="pie"?i.map((s,p)=>p===0?`${s}`:s):i,$={[F]:S},h={};let N=[];if(l&&b&&(e==null?void 0:e.measures.length)>0){const s=e==null?void 0:e.measures.map(n=>n.data);N=u.zip(...s).map(n=>{const o=n.map(d=>y(d)?d:parseFloat(d));return u.sum(o)})}(z=e==null?void 0:e.measures)==null||z.map(s=>{const n=y(s.name)?`${s.name} `:s.name;Object.assign(h,{[n]:l&&b?s.data.map((o,d)=>u.round(o/N[d],4)):s.data})});let t=[];const g=c===void 0?"dimension":c;t.push(g),t=[...t,...(j=e==null?void 0:e.measures)==null?void 0:j.map(s=>s.name)];const k=Object.assign({},$,h),f={dimensions:t,source:k};return console.log(f),f};exports.getDataset=I;exports.withInstall=E;
